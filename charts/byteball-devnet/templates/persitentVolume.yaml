{{- if and .Values.persistence.enabled (not .Values.persistence.existingClaim) }}
apiVersion: v1
kind: PersistentVolume
metadata:
  name: {{ template "byteball-devnet.name" . }}
  chart: {{ template "byteball-devnet.chart" . }}
  release: {{ .Release.Name }}
  heritage: {{ .Release.Service }}
  annotations:
    "helm.sh/resource-policy": keep
spec:
  capacity:
    storage: {{ .Values.persistence.size | quote }}
  accessModes:
  - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  hostPath:
    path: /data/volumes/byteball-devnet
    type: DirectoryOrCreate
{{- end }}
